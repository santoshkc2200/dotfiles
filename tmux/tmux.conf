##### SHELL & TERMINAL #####

# Use zsh
set -g default-shell /bin/zsh

# WezTerm / True color support
set -g default-terminal "xterm-256color"
set -ag terminal-overrides ",xterm-256color:RGB"
set -as terminal-features ',xterm-256color:clipboard'


##### GENERAL BEHAVIOR #####

set -g set-clipboard on
set -s set-clipboard on
set -g detach-on-destroy off
set -g escape-time 0
set -g history-limit 1000000
set -g mouse off
set -g status-position top


##### PREFIX #####

# unbind C-b
# set -g prefix C-Space
# bind C-Space send-prefix


##### CONFIG RELOAD #####

unbind r
bind r source-file ~/.config/tmux/tmux.conf \; display-message "tmux.conf reloaded"


##### WINDOWS & PANES #####

# Start indexing at 1
set -g base-index 1
set -g pane-base-index 1
set -g renumber-windows on

# New window in current path
bind c new-window -c "#{pane_current_path}"

# Splits in current path
unbind %
bind \\ split-window -h -c "#{pane_current_path}"

unbind '"'
bind - split-window -v -c "#{pane_current_path}"

# Resize panes (vim-style)
bind -r h resize-pane -L 5
bind -r j resize-pane -D 5
bind -r k resize-pane -U 5
bind -r l resize-pane -R 5

# Maximize / restore pane
bind m resize-pane -Z


##### COPY MODE (VI) #####

set-window-option -g mode-keys vi

# Start selection
bind -T copy-mode-vi v send -X begin-selection

# Yank to macOS clipboard
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"

# Paste system clipboard into tmux
bind ] run "pbpaste | tmux load-buffer - && tmux paste-buffer"

# Keep copy mode active when dragging
unbind -T copy-mode-vi MouseDragEnd1Pane


##### PANE NAVIGATION (PRIMEAGEN STYLE) #####

bind -r ^ last-window
bind -r h select-pane -L
bind -r j select-pane -D
bind -r k select-pane -U
bind -r l select-pane -R


##### TMUX-SESSIONIZER #####

# Main session picker
bind-key -r C-f run-shell "tmux neww ~/.config/tmux-sessionizer/tmux-sessionizer"

# Quick project slots
bind-key -r M-h run-shell "tmux neww tmux-sessionizer -s 0"
bind-key -r M-t run-shell "tmux neww tmux-sessionizer -s 1"
bind-key -r M-n run-shell "tmux neww tmux-sessionizer -s 2"


##### STATUS BAR (CLEAN & MINIMAL) #####

gray_light="#D8DEE9"
gray_dark="#3B4252"
green_soft="#A3BE8C"
cyan_soft="#88C0D0"
blue_muted="#81A1C1"

set -g status-style "fg=${gray_light},bg=default"
set -g status-left-length 100
set -g status-left "#[fg=${green_soft},bold] #S #[fg=${gray_light}]| "
set -g status-right ""

set -g window-status-current-format "#[fg=${cyan_soft},bold]  #[underscore]#I:#W"
set -g window-status-format " #I:#W"

set -g pane-border-style "fg=${gray_dark}"
set -g pane-active-border-style "fg=${green_soft}"
set -g message-style "fg=${gray_light},bg=default"
set -g mode-style "fg=${gray_dark},bg=${blue_muted}"


##### PLUGINS #####

# TPM
set -g @plugin 'tmux-plugins/tpm'

# Seamless navigation between Neovim and tmux
set -g @plugin 'christoomey/vim-tmux-navigator'


##### TPM INIT (KEEP LAST) #####

run '~/.tmux/plugins/tpm/tpm'

